<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Control de Usuarios - AFGCORPORACI칍N</title>
    <meta name="description" content="Panel de administraci칩n para gestionar asesores y clientes de AFGCORPORACI칍N">
    
    <link rel="stylesheet" href="../estilos/Control_Usuarios.css">
    <script src="../js/Control_Usuarios.js" defer></script>
    
    <link rel="stylesheet" href="../estilos/Perfil_Administrador.css">
    <script src="../js/Perfil_Administrador.js" defer></script>
</head>
<body>
    <button class="boton-hamburguesa" id="boton-menu" aria-label="Abrir men칰">
        <span class="linea-hamburguesa"></span>
        <span class="linea-hamburguesa"></span>
        <span class="linea-hamburguesa"></span>
    </button>

    <div class="overlay-menu" id="overlay-menu"></div>

    <aside class="menu-lateral" id="menu-lateral">
        <div class="contenedor-logo">
            <div class="logo-empresa">
                <img src="../src/Logo_Sin_Fondo.png" alt="Logo AFGCORPORACI칍N" class="imagen-logo">
            </div>
            <div class="nombre-empresa">AFGCORPORACI칍N</div>
        </div>
        
        <div class="contenedor-menu">
            
            <a href="../paginas/Perfil_Administrador.html" class="item-menu">
                <img src="../src/Perfil.png" alt="Perfil" class="icono-menu">
                <span>Perfil</span>
            </a>
            
            <a href="../paginas/Control_Usuarios.html" class="item-menu activo">
                <img src="../src/Contadores.png" alt="Usuarios" class="icono-menu">
                <span>Control de usuarios</span>
            </a>
            
            <a href="../paginas/Blog_Admin.html" class="item-menu">
                <img src="../src/Talleres.png" alt="Blog" class="icono-menu">
                <span>Blog</span>
            </a>
            
            <a href="../paginas/Gestor_Pagos.html" class="item-menu">
                <img src="../src/Pagos.png" alt="Pagos" class="icono-menu">
                <span>Gestor de pagos</span>
            </a>
            
            <a href="../paginas/Control_Solicitudes.html" class="item-menu">
                <img src="../src/Solicitudes.png" alt="Solicitudes" class="icono-menu">
                <span>Control de solicitudes</span>
            </a>
            
            <a href="../paginas/Historial_Asesorias.html" class="item-menu">
                <img src="../src/Historial.png" alt="Historial" class="icono-menu">
                <span>Historial de asesor칤as</span>
            </a>
        </div>

        <a href="#" class="item-menu item-logout" id="logout-button">
            <img src="../src/Salida.png" alt="Cerrar Sesi칩n" class="icono-menu">
            <span>Cerrar Sesi칩n</span>
        </a>
    </aside>
    <main class="contenido-principal">
        <div id="notificacion-banner" class="notificacion-banner">
            <div class="notificacion-icono-check">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <path d="M12 8v4M12 16h.01"></path>
                </svg>
            </div>
            <span id="notificacion-mensaje">Se agreg칩 el usuario correctamente</span>
            <button id="cerrar-notificacion" class="cerrar-notificacion">&times;</button>
        </div>

        <section class="seccion-encabezado">
            <div>
                <h1 class="titulo-pagina">Control de usuarios</h1>
                <p class="subtitulo-pagina">Gestiona asesores y clientes de la plataforma</p>
            </div>
            <button class="boton-agregar" id="btn-agregar-usuario">
                <span class="icono-mas">+</span>
                Agregar Usuario
            </button>
        </section>

        <section class="seccion-estadisticas">
            <div class="tarjeta-estadistica">
                <div class="info-estadistica">
                    <p class="label-estadistica">Total de Usuarios</p>
                    <p class="numero-estadistica" id="total-usuarios">4</p>
                </div>
                <div class="icono-estadistica icono-total">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="9" cy="7" r="4"></circle>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                    </svg>
                </div>
            </div>

            <div class="tarjeta-estadistica">
                <div class="info-estadistica">
                    <p class="label-estadistica">Usuarios Activos</p>
                    <p class="numero-estadistica" id="usuarios-activos">3</p>
                </div>
                <div class="icono-estadistica icono-activos">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                        <polyline points="22 4 12 14.01 9 11.01"></polyline>
                    </svg>
                </div>
            </div>

            <div class="tarjeta-estadistica">
                <div class="info-estadistica">
                    <p class="label-estadistica">Usuarios Inactivos</p>
                    <p class="numero-estadistica" id="usuarios-inactivos">1</p>
                </div>
                <div class="icono-estadistica icono-inactivos">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="15" y1="9" x2="9" y2="15"></line>
                        <line x1="9" y1="9" x2="15" y2="15"></line>
                    </svg>
                </div>
            </div>
        </section>

        <section class="seccion-gestion">
            <div class="contenedor-tabs">
                <button class="tab-boton activo" data-tab="asesores">
                    Gesti칩n de asesores
                </button>
                <button class="tab-boton" data-tab="clientes">
                    Gesti칩n de clientes
                </button>
            </div>

            <div class="contenido-tabs">
                <div class="tab-panel activo" id="panel-asesores">
                    <div class="controles-tabla">
                        <div class="buscador">
                            <svg class="icono-buscar" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="11" cy="11" r="8"></circle>
                                <path d="m21 21-4.35-4.35"></path>
                            </svg>
                            <input type="text" class="input-buscar" placeholder="Buscar por nombre, email, ID...">
                        </div>
                        <select class="filtro-estado">
                            <option value="todos">Todos los estados</option>
                            <option value="activo">Activo</option>
                            <option value="inactivo">Inactivo</option>
                        </select>
                    </div>

                    <div class="tabla-contenedor">
                        <table class="tabla-usuarios">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Usuario</th>
                                    <th>Rol</th>
                                    <th>Estado</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="tbody-asesores">
                                </tbody>
                        </table>
                    </div>

                    <div class="paginacion">
                        <span class="info-paginacion">Mostrando <span id="count-asesores">0</span> de <span id="total-asesores">0</span> usuarios</span>
                        <div class="controles-paginacion">
                            <button class="btn-pagina" disabled>Anterior</button>
                            <button class="btn-pagina activo">1</button>
                            <button class="btn-pagina">2</button>
                            <button class="btn-pagina">3</button>
                            <button class="btn-pagina">Siguiente</button>
                        </div>
                    </div>
                </div>

                <div class="tab-panel" id="panel-clientes">
                    <div class="controles-tabla">
                        <div class="buscador">
                            <svg class="icono-buscar" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="11" cy="11" r="8"></circle>
                                <path d="m21 21-4.35-4.35"></path>
                            </svg>
                            <input type="text" class="input-buscar" placeholder="Buscar por nombre, email, ID...">
                        </div>
                        <select class="filtro-estado">
                            <option value="todos">Todos los estados</option>
                            <option value="activo">Activo</option>
                            <option value="inactivo">Inactivo</option>
                        </select>
                    </div>

                    <div class="tabla-contenedor">
                        <table class="tabla-usuarios">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Usuario</th>
                                    <th>Rol</th>
                                    <th>Estado</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="tbody-clientes">
                                </tbody>
                        </table>
                    </div>

                    <div class="paginacion">
                        <span class="info-paginacion">Mostrando <span id="count-clientes">0</span> de <span id="total-clientes">0</span> usuarios</span>
                        <div class="controles-paginacion">
                            <button class="btn-pagina" disabled>Anterior</button>
                            <button class="btn-pagina activo">1</button>
                            <button class="btn-pagina">2</button>
                            <button class="btn-pagina">3</button>
                            <button class="btn-pagina">Siguiente</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <div id="modal-crear-usuario" class="modal-overlay">
        <div class="modal-formulario">
            <button class="cerrar-modal" id="cerrar-modal-crear">&times;</button>
            <div class="modal-header">
                <div class="modal-icono-header">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="8.5" cy="7" r="4"></circle>
                        <line x1="20" y1="8" x2="20" y2="14"></line>
                        <line x1="23" y1="11" x2="17" y2="11"></line>
                    </svg>
                </div>
                <h3 class="modal-titulo">Crear nuevo usuario</h3>
                <p class="modal-subtitulo">Asigna la informaci칩n del nuevo usuario. El ID y la contrase침a se generan autom치ticamente</p>
            </div>

            <form class="formulario-usuario" id="form-crear-usuario" novalidate>
                <div class="grupo-formulario">
                    <label class="label-formulario">ID (Autogenerado)</label>
                    <input type="text" class="input-formulario" id="input-id-auto" value="A-01" disabled>
                </div>

                <div class="grupo-formulario">
                    <label class="label-formulario">Nombre completo *</label>
                    <input 
                        type="text" 
                        class="input-formulario" 
                        placeholder="Ej: Juan P칠rez Garc칤a" 
                        id="input-usuario"
                        required
                        aria-required="true">
                    <span class="error-mensaje" id="error-usuario"></span>
                </div>

                <div class="grupo-formulario">
                    <label class="label-formulario">Correo electr칩nico *</label>
                    <input 
                        type="email" 
                        class="input-formulario" 
                        placeholder="ejemplo@correo.com" 
                        id="input-email"
                        required
                        aria-required="true">
                    <span class="error-mensaje" id="error-email"></span>
                </div>

                <div class="grupo-formulario">
                    <label class="label-formulario">Elige el rol *</label>
                    <select class="input-formulario" id="input-rol" required>
                        <option value="asesor">Asesor</option>
                        <option value="cliente">Cliente</option>
                    </select>
                </div>

                <div class="grupo-formulario">
                    <label class="label-formulario">
                        Contrase침a temporal 
                        <span class="badge-auto">Autogenerada</span>
                    </label>
                    <div class="contenedor-password-generado">
                        <input 
                            type="text" 
                            class="input-formulario input-password-generado" 
                            id="input-password" 
                            readonly
                            placeholder="Se generar치 autom치ticamente">
                        <button type="button" class="btn-generar-password" id="btn-generar-password" title="Generar nueva contrase침a">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="23 4 23 10 17 10"></polyline>
                                <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
                            </svg>
                        </button>
                        <button type="button" class="btn-copiar-password" id="btn-copiar-password" title="Copiar contrase침a">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                        </button>
                    </div>
                    <p class="info-password">游닎 La contrase침a se enviar치 autom치ticamente al correo del usuario</p>
                </div>

                <div class="botones-formulario">
                    <button type="button" class="boton-secundario" id="btn-cancelar-crear">Cancelar</button>
                    <button type="submit" class="boton-primario">Crear Usuario</button>
                </div>
            </form>
        </div>
    </div>

    <div id="modal-confirmar-cancelar" class="modal-overlay">
        <div class="modal-confirmacion">
            <div class="modal-icono-alerta">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                    <line x1="12" y1="9" x2="12" y2="13"></line>
                    <line x1="12" y1="17" x2="12.01" y2="17"></line>
                </svg>
            </div>
            <h3 class="modal-titulo-confirmacion">쮼st치s seguro?</h3>
            <p class="modal-mensaje-confirmacion">쮼st치s seguro de que deseas cancelar? No se guardar치n los datos.</p>
            <div class="botones-confirmacion">
                <button class="boton-volver" id="btn-volver">Volver</button>
                <button class="boton-confirmar-rojo" id="btn-confirmar-cancelar">S칤, cancelar</button>
            </div>
        </div>
    </div>

    <div id="modal-datos-correctos" class="modal-overlay">
        <div class="modal-confirmacion">
            <div class="modal-icono-info">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="12" y1="16" x2="12" y2="12"></line>
                    <line x1="12" y1="8" x2="12.01" y2="8"></line>
                </svg>
            </div>
            <h3 class="modal-titulo-confirmacion">쯃os datos son correctos?</h3>
            <p class="modal-mensaje-confirmacion">Se enviar치 un correo con la contrase침a temporal a:<br><strong id="email-confirmacion"></strong></p>
            <div class="botones-confirmacion">
                <button class="boton-volver" id="btn-revisar">Revisar</button>
                <button class="boton-confirmar-verde" id="btn-confirmar-crear">Aceptar y enviar</button>
            </div>
        </div>
    </div>

    <div id="modal-confirmar-eliminar" class="modal-overlay">
        <div class="modal-confirmacion">
            <div class="modal-icono-eliminar">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="3 6 5 6 21 6"></polyline>
                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                    <line x1="10" y1="11" x2="10" y2="17"></line>
                    <line x1="14" y1="11" x2="14" y2="17"></line>
                </svg>
            </div>
            <h3 class="modal-titulo-confirmacion">쮼liminar usuario?</h3>
            <p class="modal-mensaje-confirmacion">
                쮼st치s seguro de que deseas eliminar a<br>
                <strong id="nombre-eliminar"></strong>?<br>
                <span style="color: #ef4444; font-size: 13px; margin-top: 8px; display: block;">Esta acci칩n no se puede deshacer</span>
            </p>
            <div class="botones-confirmacion">
                <button class="boton-volver" id="btn-cancelar-eliminar">Cancelar</button>
                <button class="boton-confirmar-rojo" id="btn-confirmar-eliminar">S칤, eliminar</button>
            </div>
        </div>
    </div>

    <div id="modal-ver-detalles" class="modal-overlay">
        <div class="modal-formulario modal-detalles">
            <button class="cerrar-modal" id="cerrar-modal-detalles">&times;</button>
            <div class="modal-header">
                <div class="modal-icono-header">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                </div>
                <h3 class="modal-titulo">Detalles del Usuario</h3>
                <p class="modal-subtitulo">Visualiza y edita la informaci칩n del usuario</p>
            </div>

            <form class="formulario-usuario" id="form-editar-usuario" novalidate>
                <div class="grupo-formulario grupo-avatar">
                    <div class="avatar-grande" id="avatar-detalle" style="background-color: #0891b2;">
                        <span id="iniciales-detalle">JD</span>
                    </div>
                    <div class="info-basica-detalle">
                        <span class="badge-rol-detalle" id="badge-rol-detalle">Asesor</span>
                        <span class="badge-estado-detalle activo" id="badge-estado-detalle">Activo</span>
                    </div>
                </div>

                <div class="grupo-formulario">
                    <label class="label-formulario">ID de Usuario</label>
                    <input type="text" class="input-formulario" id="detalle-id" disabled>
                </div>

                <div class="grupo-formulario">
                    <label class="label-formulario">Nombre completo *</label>
                    <input 
                        type="text" 
                        class="input-formulario" 
                        id="detalle-nombre"
                        required>
                    <span class="error-mensaje" id="error-detalle-nombre"></span>
                </div>

                <div class="grupo-formulario">
                    <label class="label-formulario">Correo electr칩nico *</label>
                    <input 
                        type="email" 
                        class="input-formulario" 
                        id="detalle-email"
                        required>
                    <span class="error-mensaje" id="error-detalle-email"></span>
                </div>

                <div class="grupo-formulario">
                    <label class="label-formulario">Rol</label>
                    <select class="input-formulario" id="detalle-rol">
                        <option value="asesor">Asesor</option>
                        <option value="cliente">Cliente</option>
                    </select>
                </div>

                <div class="grupo-formulario">
                    <label class="label-formulario">Estado</label>
                    <select class="input-formulario" id="detalle-estado">
                        <option value="activo">Activo</option>
                        <option value="inactivo">Inactivo</option>
                    </select>
                </div>

                <div class="grupo-formulario">
                    <label class="label-formulario">
                        Nueva Contrase침a 
                        <span style="font-size: 12px; color: #666; font-weight: 400;">(Opcional - dejar vac칤o para no cambiar)</span>
                    </label>
                    <div class="contenedor-password-generado">
                        <input 
                            type="text" 
                            class="input-formulario input-password-generado" 
                            id="detalle-password"
                            placeholder="Dejar vac칤o para no cambiar">
                        <button type="button" class="btn-generar-password" id="btn-generar-password-detalle" title="Generar nueva contrase침a">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="23 4 23 10 17 10"></polyline>
                                <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
                            </svg>
                        </button>
                        <button type="button" class="btn-copiar-password" id="btn-copiar-password-detalle" title="Copiar contrase침a">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                        </button>
                    </div>
                    <p class="info-password">游눠 Si generas una nueva contrase침a, se enviar치 por email al usuario</p>
                </div>

                <div class="botones-formulario">
                    <button type="button" class="boton-secundario" id="btn-cancelar-editar">Cancelar</button>
                    <button type="submit" class="boton-primario">Guardar Cambios</button>
                </div>
            </form>
        </div>
    </div>

    <div id="modal-logout" class="modal-overlay">
        <div class="modal-contenido">
            <div class="modal-icono icono-logout">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                    <line x1="12" y1="9" x2="12" y2="13"></line>
                    <line x1="12" y1="17" x2="12.01" y2="17"></line>
                </svg>
            </div>
            <h3 class="modal-titulo">Cerrar Sesi칩n</h3>
            <p class="modal-mensaje">쮼st치s seguro de que deseas salir de tu cuenta?</p>
            <div class="modal-botones">
                <button class="modal-btn-volver" id="btn-logout-volver">Volver</button>
                <button class="modal-btn-cancelar" id="btn-logout-confirmar">S칤, salir</button>
            </div>
        </div>
    </div>

</body>
</html>